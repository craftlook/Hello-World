# 聚簇索引与非聚簇索引

## 区别

聚簇索引&非聚簇索引的主要区别：叶节点是否存放一整行的记录。

InnoDB主键索引使用的是聚簇索引，MyISAM 主键索引、二级索引都是用的是非聚簇索引

如下图展示区别：
![avatar](https://github.com/craftlook/Hello-World/blob/craftlook-Hello-World/image/%E8%81%9A%E7%B0%87%26%E9%9D%9E%E8%81%9A%E7%B0%87%E5%8C%BA%E5%88%AB%E7%AE%80%E5%9B%BE.jpg)

* MyISAM（右边），表数据和索引是分成两部分存储的，Primary Key（主键索引简称PK）与 Secondary Key（二级索引）存储上没有本质的区别。都是用B+树作为索引的存储结构（<a href="">算法详情</a>），所有的节点存储的都是索引，叶子节点存储的是索引+索引对应的记录的数据。
* InnoDB（左边），表数据与主键一起存储，主键索引的叶节点存储行数据（包含主键值），二级索引的叶节点存储行的主键值。使用B+树作为存储结构，非叶子节点都是索引的关键字（关键字中不存储对应记录的具体内容或内容地址）。叶子节点上的数据是主键与数据内容。

### MyISAM中的B+树
**MYISAM中叶子节点的数据区域存储的是数据记录的地址**
**主键索引**
![avatar](https://github.com/craftlook/Hello-World/blob/craftlook-Hello-World/image/myisam-B%2B.jpg)
**二级索引**
![avatar](https://github.com/craftlook/Hello-World/blob/craftlook-Hello-World/image/myisam-B%2B1.jpg)
MyISAM存储引擎在使用索引查询数据时，会先根据索引查找到数据地址，再根据地址查询到具体的数据。并且主键索引和辅助索引没有太多区别。
### InnoDB中的B+树
**InnoDB中主键索引的叶子节点的数据区域存储的是数据记录，辅助索引存储的是主键值**
**主键索引**
![avatar](https://github.com/craftlook/Hello-World/blob/craftlook-Hello-World/image/innodb-B%2B.jpg)
![avatar](https://github.com/craftlook/Hello-World/blob/craftlook-Hello-World/image/innodb-b%2B1.jpg)
**二级索引**
![avatar](https://github.com/craftlook/Hello-World/blob/craftlook-Hello-World/image/innodb-B%2B2.jpg)
Innodb中的主键索引和实际数据时绑定在一起的，也就是说Innodb的一个表一定要有主键索引，如果一个表没有手动建立主键索引，Innodb会查看有没有唯一索引，如果有则选用唯一索引作为主键索引，如果连唯一索引也没有，则会默认建立一个隐藏的主键索引（用户不可见）。另外，Innodb的主键索引要比MyISAM的主键索引查询效率要高（少一次磁盘IO），并且比辅助索引也要高很多。所以，我们在使用Innodb作为存储引擎时，我们最好：
* 手动建立主键索引
* 尽量利用主键索引查询
## 聚簇索引的优点&缺点

### 优点



### 缺点
